# RUN: %pyxc -i %s > %t 2>&1
# RUN: grep -x 'alpha' %t
# RUN: ! grep -q "Error (Line:" %t

def main() -> i32:
    f: ptr[void] = fopen("chapter23_io_a.txt", "w")
    fputs("alpha\n", f)
    fclose(f)

    f = fopen("chapter23_io_a.txt", "r")
    buf: ptr[i8] = malloc[i8](64)
    n: i32 = 64
    fgets(buf, n, f)
    fclose(f)

    printf("%s", buf)
    free(buf)
    return 0

main()
