# Test short-circuit evaluation of `and`/`or`.
# The second operand should NOT be evaluated if short-circuited.
# We test by having the second operand call a function with side effects.
# RUN: %pyxc -i %s > %t 2>&1
# RUN: grep -x 'done' %t
# RUN: ! grep -q 'side-effect' %t
# RUN: ! grep -q "Error (Line:" %t

def side() -> i32:
    printf("side-effect\n")
    return 1

def main() -> i32:
    # 0 and side() should short-circuit: side() never called
    x: i32 = 0
    if x and side():
        printf("should not reach\n")
    printf("done\n")
    return 0

main()
