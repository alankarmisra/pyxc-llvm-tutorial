# RUN: %pyxc < %s > %t 2>&1
# RUN: grep -q "Error (Line 2," %t
# RUN: grep -q "Expected ':' in function definition" %t
# RUN: grep -q "def foo(x) return x" %t

# Test that a tok_eol error on line 2 reports Line 2 (not Line 1) and shows
# the correct source line. This catches the off-by-one that occurred when
# gettok set CurLoc = {LexLoc.Line - 1, ...} instead of {LexLoc.Line, ...}
# for tok_eol, causing GetDiagnosticAnchorLoc to go one extra line back.
def good(x): return x
def foo(x) return x
